{% extends 'base.html' %}

{% block title %}Edit Record - Health Monitoring{% endblock %}

{% block content %}
<div class="page-header d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="h3 mb-1">Edit Health Record</h1>
        <div class="text-muted">Update the selected record</div>
    </div>
    <div>
        <a href="{% url 'health:log_data' %}" class="btn btn-sm btn-outline-light"><i class="fa-solid fa-table-list me-1"></i> Back to Records</a>
    </div>
</div>

<div class="card">
    {% if form.errors %}
    <div class="alert-custom alert-warning">Please fix the highlighted fields and try again.</div>
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <div class="form-grid">
            <div>
                <label class="form-label text-muted" for="date">Date</label>
                <input type="date" id="date" name="date" value="{% if form.is_bound %}{{ form.data.date }}{% else %}{{ record.date|date:'Y-m-d' }}{% endif %}" class="form-control" required>
                {% if form.errors.date %}<small class="text-danger">{{ form.errors.date }}</small>{% endif %}
            </div>
            <div>
                <label class="form-label text-muted" for="heart_rate">Heart Rate (bpm)</label>
                <input type="number" id="heart_rate" name="heart_rate" min="40" max="200" value="{% if form.is_bound %}{{ form.data.heart_rate }}{% else %}{{ record.heart_rate }}{% endif %}" class="form-control" required>
                {% if form.errors.heart_rate %}<small class="text-danger">{{ form.errors.heart_rate }}</small>{% endif %}
            </div>
            <div>
                <label class="form-label text-muted" for="sleep_hours">Sleep Hours</label>
                <input type="number" id="sleep_hours" name="sleep_hours" min="0" max="24" step="0.1" value="{% if form.is_bound %}{{ form.data.sleep_hours }}{% else %}{{ record.sleep_hours }}{% endif %}" class="form-control" required>
                {% if form.errors.sleep_hours %}<small class="text-danger">{{ form.errors.sleep_hours }}</small>{% endif %}
            </div>
            <div>
                <label class="form-label text-muted" for="steps">Steps</label>
                <input type="number" id="steps" name="steps" min="0" value="{% if form.is_bound %}{{ form.data.steps }}{% else %}{{ record.steps }}{% endif %}" class="form-control" required>
                {% if form.errors.steps %}<small class="text-danger">{{ form.errors.steps }}</small>{% endif %}
            </div>
        </div>
        <div class="mt-3 d-flex gap-2">
            <button type="submit" class="btn btn-primary">Update Record</button>
            <a href="{% url 'health:log_data' %}" class="btn btn-outline-light">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
